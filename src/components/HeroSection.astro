---
// Componente Hero con fondo de video, diseño centrado y logo más grande
import logoSvg from '../assets/branding/logo.svg';
---

<section id="inicio" class="relative min-h-screen flex flex-col items-center justify-center text-white overflow-hidden" style="perspective: 1000px;">
  <div class="h-24"></div>
  <video 
    autoplay 
    loop 
    muted 
    playsinline 
    class="absolute z-[-1] w-full h-full object-cover parallax-background"
    poster={logoSvg.src}>
    <source src="/herevideo.webm" type="video/webm">
    <source src="/herovideo.mp4" type="video/mp4">
    Tu navegador no soporta videos HTML5.
  </video>

  <div class="absolute inset-0 bg-black/60 parallax-background-overlay"></div>

  <div class="relative z-10 max-w-4xl mx-auto px-4 text-center fade-in-element">
    <h1 class="text-4xl sm:text-5xl lg:text-6xl font-bold mb-6 leading-tight">
      Soluciones de Ingeniería <span class="text-primary">Integrales 360°</span>
    </h1>
    <p class="text-lg sm:text-xl text-gray-200 mb-8 leading-relaxed">
      Especialistas en automatización y soluciones tecnológicas, transformamos oportunidades en resultados estratégicos mediante una gestión integral de proyectos.
    </p>
    <div class="flex flex-col sm:flex-row gap-4 justify-center">
      <a href="#servicios" class="bg-primary text-white px-8 py-3 rounded-lg font-semibold hover:bg-white hover:text-black transition-all transform hover:scale-105 shadow-lg">
        Explorar Soluciones
      </a>
      <a href="https://api.whatsapp.com/send?phone=573243025107&text=Hola%2C%20quiero%20m%C3%A1s%20informaci%C3%B3n%20sobre%20las%20soluciones%20integrales." target="_blank" rel="noopener noreferrer" class="bg-white/10 border-2 border-white text-white px-8 py-3 rounded-lg font-semibold hover:bg-white hover:text-primary transition-all shadow-lg">
        Contactar por WhatsApp
      </a>
    </div>

    <div class="mt-12" style="transform-style: preserve-3d;"> 
      <img 
        src={logoSvg.src} 
        alt="Logo S&G Soluciones de Ingeniería" 
        class="h-20 sm:h-24 w-auto mx-auto opacity-80 hover:opacity-100 transition-all duration-300 hero-logo-3d" 
      />
    </div>
  </div>
</section>

<style>
  .hero-logo-3d {
    transform: translateZ(50px) rotateX(5deg);
    will-change: transform;
  }

  .parallax-background,
  .parallax-background-overlay {
    transform: translateZ(-10px) scale(1.02);
    will-change: transform;
  }

  .fade-in-element {
    opacity: 0;
    transform: translateY(30px);
    transition: opacity 0.8s ease-out, transform 0.8s ease-out;
  }
  .fade-in-element.is-visible {
    opacity: 1;
    transform: translateY(0);
  }
</style>

<script>
  // El script no necesita cambios, se mantiene igual.
  document.addEventListener('DOMContentLoaded', () => {
    const observer = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          entry.target.classList.add('is-visible');
          observer.unobserve(entry.target);
        }
      });
    }, { threshold: 0.1 });
    const el = document.querySelector('.fade-in-element');
    if (el) {
      observer.observe(el);
    }
  });

  const heroLogo = document.querySelector('.hero-logo-3d');
  const heroVideo = document.querySelector('.parallax-background');
  const heroOverlay = document.querySelector('.parallax-background-overlay');
  
  function handleScroll() {
    if (!heroLogo || !heroVideo || !heroOverlay) return;
    const scrollY = window.scrollY;
    const sectionHeight = document.getElementById('inicio')?.offsetHeight ?? window.innerHeight;
    const scrollProgress = Math.min(scrollY / sectionHeight, 1);
    const logoTranslateZ = 50 - (scrollProgress * 100);
    const logoRotateX = 5 + (scrollProgress * 15);
    const logoRotateY = 0 + (scrollProgress * -5);
    const backgroundTranslateZ = -10 + (scrollProgress * 20);
    if (heroLogo instanceof HTMLElement) {
      heroLogo.style.transform = `translateZ(${logoTranslateZ}px) rotateX(${logoRotateX}deg) rotateY(${logoRotateY}deg)`;
    }
    if (heroVideo instanceof HTMLElement) {
      heroVideo.style.transform = `translateZ(${backgroundTranslateZ}px) scale(1.02)`;
    }
    if (heroOverlay instanceof HTMLElement) {
      heroOverlay.style.transform = `translateZ(${backgroundTranslateZ}px) scale(1.02)`;
    }
  }

  function onScroll() {
    window.requestAnimationFrame(handleScroll);
  }
  document.addEventListener('scroll', onScroll);
  handleScroll();
</script>